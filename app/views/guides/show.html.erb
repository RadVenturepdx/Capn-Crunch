<% provide(:title, @guide.user.name) %>

<body>
  <!-- Page Content -->
  <div class="container">

    <!-- Page Heading -->
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">
                Guide Profile
            </h1>
        </div>
    </div>
    <!-- /.row -->

    <!-- Guide Profile Section -->
    <div class="row">
      <!-- Main Guide Info: Name, Location, Sport, Pricing, Ratings -->
      <div class="col-lg-12">
        <div class="panel panel-default">
          <div class="panel-body">
            <div class="col-xs-12 col-sm-5">
              <img class="img img-circle img-responsive full-width"
                src="img/guide-n-location/guide1.jpg"
                style="position:relative; overflow: hidden;" alt="">
            </div>
            <div class="col-sm-offset-1 col-xs-12 col-sm-6">
              <h1><strong><%= @guide.user.name %></strong></h1>
              <h3><strong>Location: </strong><%= location_string(@guide.hood, @guide.bachelor, @guide.whistler) %> </h3>
              <h3><strong>Sports: </strong><%= sports_string(@guide.downhill, @guide.crosscountry, @guide.snowboard) %></h3>
              <h3><strong>Pricing: </strong><%= number_to_currency(@guide.rate) %>/hour</h3>
              <h3><strong>Rating: </strong>
                <% if @guide.reviews.count > 0 %>
                  <% stars = @guide.reviews.average(:rating).round %>
                  <% stars.times do |i| %>
                    <span class="fa fa-star"></span>
                  <% end %>
                  <% (5 - stars).times do |i| %>
                    <span class="fa fa-star-o"></span>
                  <% end %>
                <% else %>
                  No one has reviewed this guide yet. Be the first!
                <% end %>
              </h3>
              <%= link_to "Reservation", reservation_path, class: "btn btn-primary" %>
              <!-- <i class="fa fa-book"></i> -->
              <button type="button" class="btn btn-primary"
                data-toggle="modal" data-target="#contactGuide">
                  <!-- <i class="fa fa-question-circle"></i> -->
                  <strong>Ask Guide a Question</strong>
              </button>
              <div class="modal fade" id="contactGuide" tabindex="-1"
                  role="dialog" aria-labelledby="myModalLabel"
                  aria-hidden="true" style="z-index:99999999999">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal"
                        aria-label="Close"><span aria-hidden="true">&times;</span>
                      </button>
                      <h3 class="modal-title" id="contactGuide">Ask Guide a Question</h3>
                    </div>
                    <div class="modal-body">
                      <form name="sentMessage" id="contactGuide"  novalidate>
                        <div class="control-group">
                          <div class="controls">
                            <input type="text" class="form-control"
                              placeholder="Your Full Name" id="name" required
                              data-validation-required-message="Please enter your name"
                            />
                            <p class="help-block"></p>
                          </div>
                        </div>
                        <div class="control-group">
                          <div class="controls">
                            <input type="email" class="form-control" placeholder="Your Email"
                              id="email" required
                              data-validation-required-message="Please enter your email"
                            />
                            <p class="help-block"></p>
                          </div>
                        </div>
                        <div class="control-group">
                          <div class="controls">
                            <textarea rows="10" cols="100" class="form-control"
                              placeholder="Question or Message" id="message" required
                              data-validation-required-message="Please enter your question"
                              minlength="5" data-validation-minlength-message="Min 5 characters"
                              maxlength="999" style="resize:none">
                            </textarea>
                          </div>
                          <p class="help-block"></p>
                        </div>
                        <div id="success"> </div> <!-- For success/fail messages -->
                      </form>
                    </div>
                    <div class="modal-footer">
                      <button type="submit" class="btn btn-success">Submit</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Guide Profile Info Tab Navigation -->
    <ul id="myTab" class="nav nav-tabs nav-justified">
        <li class="active"><a href="#about-Me" data-toggle="tab">
          <i class="fa fa-child">
          </i> About Me</a>
        </li>
        <li class="">
          <a href="#availability" data-toggle="tab">
          <i class="fa fa-calendar"></i> Availability</a>
        </li>
        <li class="">
          <a href="#reviews" data-toggle="tab">
          <i class="fa fa-users"></i> Reviews</a>
        </li>
    </ul>

    <!-- Guide Profile Info Tab Content -->
    <div id="myTabContent" class="tab-content">
      <div class="tab-pane fade active in col-sm-12" id="about-Me">
        <h3>About Me</h3>
        <p>
          <%= @guide.user.profile %>
        </p>
      </div>

      <div class="tab-pane fade col-sm-12" id="availability">
        <h3>Availability</h3>
        <table class="table table-striped">
          <tr>
            <td>Sunday</td>
            <td><%= @guide.sun_avail %></td>
          </tr>
          <tr>
            <td>Monday</td>
            <td><%= @guide.mon_avail %></td>
          </tr>
          <tr>
            <td>Tuesday</td>
            <td><%= @guide.tues_avail %></td>
          </tr>
          <tr>
            <td>Wednesday</td>
            <td><%= @guide.wed_avail %></td>
          </tr>
          <tr>
            <td>Thursday</td>
            <td><%= @guide.thurs_avail %></td>
          </tr>
          <tr>
            <td>Friday</td>
            <td><%= @guide.fri_avail %></td>
          </tr>
          <tr>
            <td>Saturday</td>
            <td><%= @guide.sat_avail %></td>
          </tr>
        </table>
      </div>

      <div class="tab-pane fade col-sm-12" id="reviews">
        <h3>Reviews</h3>
        <!-- Review Row -->
        <div class="row">
          <% for review in @guide.reviews %>
            <div class="col-md-1 text-center">
              <p><i class="fa fa-user fa-4x"></i></p>
              <p><%= review.created_at %></p>
            </div>
            <div class="col-md-11">
              <h3>Review Title1</h3>
              <!-- Rating stars -->
              <% reviewRating = review.rating %>
              <p>
                <% reviewRating.times do |i| %>
                  <span class="fa fa-star"></span>
                <% end %>
                <% (5 - reviewRating).times do |i| %>
                  <span class="fa fa-star-o"></span>
                <% end %>
              </p>
              <p>
                by <%= review.user.name %>
              </p>
              <p>
                <%= review.content %>
              </p>
            </div>
          <% end %>
        </div>
        <!-- /.row -->
      </div>
    </div>
    <!-- /.row -->

  </div>
  <!-- /.container -->
</body>
